# PsychTestR elements
intro <- c(
welcome <-
one_button_page(div(
HTML("<img src='img/au_logo.png'></img> <img src='img/mib_logo.png'></img>"),
div(
h3(strong("Hi there!")),
p("Thanks a lot for your interest in participating in this study. As you will already know, this is the online part of the experiment Pitch and Rhythmic Motor Behaviours. It will take you about 30 seconds. Please complete it 5 times with at least 2 hours seperating each time before coming to the lab. In case you have not already selected an appointment for your lab visit on Sona Systems, make sure to contact ben.engler@clin.au.dk.",
p("If possible, please use a device with a touchscreen, alternatively a clickpad or mouse, rather than a laptop touchpad. You can not use a keyboard."),
HTML("<br>"),
HTML("<p style= 'font-size:14px'> <em>WHAT HERE?????????????????????????????The research data you generate is completely anonymous. Questions? Contact ben.engler@clin.au.dk. By clicking the button below (I understand. Continue!) you confirm that you are at least 18 years old and you give your consent to participate in this part of the experiment.</em></p>"),
)
)),
button_text = "I understand. Continue!"
),
# PAGES
device <-dropdown_page(
label = "device",
prompt = div(h4(strong("Device")),
p("Which device you are using now?")),
save_answer=TRUE,
choices = c("Select current device", "Smartphone (touchscreen)","Tablet (touchscreen)","Laptop (touchscreen)","Laptop (click button/clickpad)", "Laptop (external mouse)", "Desktop (external mouse)"),
alternative_choice = TRUE,
alternative_text = "Other - please state which?",
next_button_text = "Next",
max_width_pixels = 250,
validate = function(answer, ...) {
if (answer=="Select current device")
"Which device are you using to take the test? Click the small arrow on the right of the first box to see the options. We ask because it matters for the analyses of the data you provide."
else if (answer=="")
"Please tell us which device you are currently using. If you select 'Other' at the bottom of the list, please state in the designated field which type of device you use to take the test."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "device", value = answer, state = state)
}
),
browser <- dropdown_page(
label = "browser",
prompt = div(h4(strong("Browser")),
p("Which browser are you using?"),
# HTML("<br>"),
p("PLEASE NOTE: Safari may not work, depending on your settings."),
),
save_answer=TRUE,
choices = c("Select current browser","Firefox", "Chrome","Edge","Internet Explorer","Safari", "Opera", "I do not know"),
alternative_choice = TRUE,
alternative_text = "Other - please state which?",
next_button_text = "Next",
max_width_pixels = 250,
validate = function(answer, ...) {
if (answer=="Select current browser")
"Please tells us which browser you use (click the small arrow on the right of the first box to see the options). We ask because it matters for the analyses of the data you provide."
else if (answer=="")
"Please answer the question. If you select 'Other' at the bottom of the list, please state the name of your browser in the designated field."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "browser", value = answer, state = state)
}
),
time <- dropdown_page(
label = "time",
prompt = div(h4(strong("How old is your day?")),
p("How many hours have passed since you woke up this morning?"),
# HTML("<br>"),
p(),
),
save_answer=TRUE,
choices = c("Please select"," less than 1 hour","1 hour","2 hours","3","4", "5","6","7","8","9","10","11","12","13","14", "15","16","17","18","19","20","21","22","23","24", "25 hours or more"),
next_button_text = "Next",
max_width_pixels = 250,
validate = function(answer, ...) {
if (answer=="Please select")
"Please tells us how many hours have passed since you woke up this morning. An approximate number is perfectly fine."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "browser", value = answer, state = state)
}
)
)
# DEMOGRAPHICS
# age <-dropdown_page(
#   label = "age",
#   prompt = div(h4(strong("Thanks! Two super quick questions before we're done.")),
#
#                p(strong ("What is your age?")),
#   ),
#   save_answer=TRUE,
#   choices = c("Please select","18-19 years","20-21","22-23","24-25","26-27","28-29","30-31","32-33","34-35","36-37","38-39","40-41","42-43","44-45","46-47","48-49","50-51","52-53","54-55","56-57","58-59","60-61","62-63","64-65","66-67","68-69","70-71","72-73","74-75","76-77","78-79","80 years or above"),
#   next_button_text = "Next",
#   max_width_pixels = 250,
#   validate = function(answer, ...) {
#     if (answer=="Please select")
#       "Please state your age (click the small arrow on the right of the box to see the options). We ask because it matters for the analyses of the data you provide."
#     #else if (answer=="")
#     #   "Please answer the question. If you select 'Other' at the bottom of the list, please state the name of your browser in the designated field."
#     else TRUE
#   },
#   on_complete = function(answer, state, ...) {
#     set_global(key = "age", value = answer, state = state)
#   }
# )
#
# gender<-NAFC_page(
#   label = "gender",
#   prompt = p(strong ("Whats is your gender?")),
#   choices = c("Female", "Male","Other","I prefer not to tell you"),
# )
# MUSICAL EXPERIENCE
#music_exp <-
# c(
# ollen
# ollen<-NAFC_page(
#   label = "ollen",
#   prompt = p(strong ("Which title best describes you?")),
#   choices = c("Nonmusician", "Music-loving nonmusician","Amateur musician","Serious amateur musician","Semiprofessional musician","Professional musician"),
#   on_complete = function(answer, state, ...) {
#     set_global(key = "ollen", value = answer, state = state)
#     # if (answer == "Nonmusician"|answer =="Music-loving nonmusician") skip_n_pages(state,3)
#   }
#   )
# COMMENTS
# duplets <- dropdown_page(
#   label = "duplets",
#   prompt = p(strong("Did you take part in this exact same pilot experiment before?")),
#   save_answer=TRUE,
#   choices = c("Please select", "No", "Yes, once before", "Yes, twice before",	"Yes, three times before",	"Yes, four times before",	"Yes, five times before",	"Yes, six or more times before"),
#   # alternative_choice = TRUE,
#   # alternative_text = "I prefer not to tell you",
#   next_button_text = "Next",
#   max_width_pixels = 250,
#   validate = function(answer, ...) {
#     if (answer=="Please select")
#       "Please let us know if you tried this exact same experiment before. We ask because it matters for the analyses of the data you provide. If you like, you can provide additional comments in the next and final question."
#     else TRUE
#   },
#   on_complete = function(answer, state, ...) {
#     set_global(key = "duplets", value = answer, state = state)
#     if (answer != "No") skip_n_pages(state,1)
#   }
# )
code_1 <- text_input_page(
label = "code",
# one_line = TRUE,
width = "400px",
prompt = div(
HTML("<br>"),
p(strong("Personal code")),
HTML("<br>"),
p("Please enter a unique personal identifier as follows: Number of letters in your current street name + last three letters of your mom's first name + the result when you sum up the first 4 numbers of your current phone number (without the country code +45). If you live on Main street, your mom's name is Gertrude, and your phone number is 52 12 34 56, your code would be 10ude10."),
p("You will be asked to enter this identifier every time you complete this short experiment. We will also need it for when you are coming to the lab.")
),
save_answer = T,
button_text = "Next",
validate = function(answer, ...) {
if (answer=="")
"Please enter your personal identifier."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "code_1", value = answer, state = state)
if (answer != "No") skip_n_pages(state,1)
}
)
# code_2 <- text_input_page(
#   label = "code",
#   # one_line = TRUE,
#   width = "400px",
#   prompt = div(
#     HTML("<br>"),
#     p(strong("Personal code")),
#     HTML("<br>"),
#     p("Please enter the self-chosen code you used last time you took part in this pilot experiment.")
#   ),
#   save_answer = T,
#   button_text = "Next",
#   validate = function(answer, ...) {
#     if (answer=="")
#       "Please enter the code you have previously used in this experiment. If you don't remember your code, make up a new one and use that for any future participation in this same experiment."
#     else TRUE
#   },
#   on_complete = function(answer, state, ...) {
#     set_global(key = "code_2", value = answer, state = state)
#     if (answer != "") skip_n_pages(state,2)
#   }
# )
thanks<-final_page(div(
HTML("<img src='img/au_logo.png'></img> <img src='img/mib_logo.png'></img>"),
div(
h3(strong("Thanks again!")),
p("Don't forget to complete this short task 5 times with 2 hours seperating each time. We will see you in the lab! "),
p("If you have any questions, feel free to contact ben.engler@clin.au.dk."),
p("............."),
HTML("<br>"),
p("Your data has been saved now and you can safely close the browser window.")
# p("If you want to, you can click the button below")
)
))
# facts<-c("E is the most common letter and appears in 11 percent of all english words.",
#                 "Pringles aren't actually potato chips.",
#                 "Water makes different pouring sounds depending on its temperature (colder water => higher pitch)"
#                 )
# ff<-sample(facts, 1)
# fun_fact<-final_page(div(
#   HTML("<img src='img/au_logo.png'></img> <img src='img/mib_logo.png'></img>"),
#   div(
#     h3(strong("Did you know that...")),
#     p("insert fun fact here"),
#     p("For more fun facts, repeat the test anytime. www.cmb-onlinetest.uni.au.dk/SMT.")
#   )
# ))
elts <- join(
intro,
poly_ratio,
elt_save_results_to_disk(complete = FALSE),
code_1,
elt_save_results_to_disk(complete = TRUE),
thanks
# fun_fact
)
make_test(
elts = elts,
opt = test_options(title="SMT consistency, pilot 2022",
admin_password="", # write a secret password here
enable_admin_panel=TRUE,
researcher_email="cecilie@clin.au.dk",
problems_info="Problems? Contact cecilie@clin.au.dk",
display = display_options(
full_screen = TRUE,
css = c(file.path(jspsych_dir, "css/jspsych.css"),"css/style.css")
)))
setwd("~/uni/BA project/SMT_online")
# # ####################################################
# # # This script makes a psychTestR implementation of
# # # a "one-minute science" study assessing SMT
# # #
# # # Date:14/4- 2022
# # # Author: Cecilie MÃ¸ller
# # # Project group: Above + Jan Stupacher, Alexandre Celma-Miralles, Peter Vuust
# # ###################################################
#modified by Ben Engler for study "Internal Oscillators as frames of reference"
library(htmltools)
library(psychTestR)
library(tibble)
jspsych_dir <- "jspsych-6.1.0"
head <- tags$head(
# jsPsych files
# # If you want to use original jspsych.js, use this:
# includeScript(file.path(jspsych_dir, "jspsych.js")),
# If you want to display text while preloading files (to save time), specify your intro_text
# in jsPsych.init (in run-jspsych.js) and call jspsych_preloadprogressbar.js here:
includeScript(file.path(jspsych_dir, "jspsych_preloadprogressbar.js")),
includeScript(
file.path(jspsych_dir, "plugins/jspsych-html-button-response.js")
),
includeScript(
file.path(jspsych_dir, "plugins/jspsych-audio-button-response.js")
),
includeScript(
file.path(jspsych_dir, "plugins/jspsych-html-slider-response.js")
),
# Custom files
includeScript(
file.path(
jspsych_dir,
"plugins/jspsych_BPM/jspsych-audio-bpm-button-response.js"
)
),
includeCSS(file.path(jspsych_dir, "css/jspsych.css")),
includeCSS("css/style.css")
)
ui_exp <- tags$div(
head,
includeScript("exp-rand.js"),
includeScript("new-timeline.js"),
includeScript("run-jspsych.js"),
tags$div(id = "js_psych")
)
poly_ratio <- page(
ui = ui_exp,
label = "poly_ratio",
get_answer = function(input, ...)
input$jspsych_results,
validate = function(answer, ...)
nchar(answer) > 0L,
save_answer = TRUE
)
# PsychTestR elements
intro <- c(
welcome <-
one_button_page(div(
HTML("<img src='img/au_logo.png'></img> <img src='img/mib_logo.png'></img>"),
div(
h3(strong("Hi there!")),
p("Thanks a lot for your interest in participating in this study. As you will already know, this is the online part of the experiment Pitch and Rhythmic Motor Behaviours. It will take you about 30 seconds. Please complete it 5 times with at least 2 hours seperating each time before coming to the lab. In case you have not already selected an appointment for your lab visit on Sona Systems, make sure to contact ben.engler@clin.au.dk.",
p("If possible, please use a device with a touchscreen, alternatively a clickpad or mouse, rather than a laptop touchpad. You can not use a keyboard."),
HTML("<br>"),
HTML("<p style= 'font-size:14px'> <em>WHAT HERE?????????????????????????????The research data you generate is completely anonymous. Questions? Contact ben.engler@clin.au.dk. By clicking the button below (I understand. Continue!) you confirm that you are at least 18 years old and you give your consent to participate in this part of the experiment.</em></p>"),
)
)),
button_text = "I understand. Continue!"
),
# PAGES
device <-dropdown_page(
label = "device",
prompt = div(h4(strong("Device")),
p("Which device you are using now?")),
save_answer=TRUE,
choices = c("Select current device", "Smartphone (touchscreen)","Tablet (touchscreen)","Laptop (touchscreen)","Laptop (click button/clickpad)", "Laptop (external mouse)", "Desktop (external mouse)"),
alternative_choice = TRUE,
alternative_text = "Other - please state which?",
next_button_text = "Next",
max_width_pixels = 250,
validate = function(answer, ...) {
if (answer=="Select current device")
"Which device are you using to take the test? Click the small arrow on the right of the first box to see the options. We ask because it matters for the analyses of the data you provide."
else if (answer=="")
"Please tell us which device you are currently using. If you select 'Other' at the bottom of the list, please state in the designated field which type of device you use to take the test."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "device", value = answer, state = state)
}
),
browser <- dropdown_page(
label = "browser",
prompt = div(h4(strong("Browser")),
p("Which browser are you using?"),
# HTML("<br>"),
p("PLEASE NOTE: Safari may not work, depending on your settings."),
),
save_answer=TRUE,
choices = c("Select current browser","Firefox", "Chrome","Edge","Internet Explorer","Safari", "Opera", "I do not know"),
alternative_choice = TRUE,
alternative_text = "Other - please state which?",
next_button_text = "Next",
max_width_pixels = 250,
validate = function(answer, ...) {
if (answer=="Select current browser")
"Please tells us which browser you use (click the small arrow on the right of the first box to see the options). We ask because it matters for the analyses of the data you provide."
else if (answer=="")
"Please answer the question. If you select 'Other' at the bottom of the list, please state the name of your browser in the designated field."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "browser", value = answer, state = state)
}
),
time <- dropdown_page(
label = "time",
prompt = div(h4(strong("How old is your day?")),
p("How many hours have passed since you woke up this morning?"),
# HTML("<br>"),
p(),
),
save_answer=TRUE,
choices = c("Please select"," less than 1 hour","1 hour","2 hours","3","4", "5","6","7","8","9","10","11","12","13","14", "15","16","17","18","19","20","21","22","23","24", "25 hours or more"),
next_button_text = "Next",
max_width_pixels = 250,
validate = function(answer, ...) {
if (answer=="Please select")
"Please tells us how many hours have passed since you woke up this morning. An approximate number is perfectly fine."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "browser", value = answer, state = state)
}
)
)
# DEMOGRAPHICS
# age <-dropdown_page(
#   label = "age",
#   prompt = div(h4(strong("Thanks! Two super quick questions before we're done.")),
#
#                p(strong ("What is your age?")),
#   ),
#   save_answer=TRUE,
#   choices = c("Please select","18-19 years","20-21","22-23","24-25","26-27","28-29","30-31","32-33","34-35","36-37","38-39","40-41","42-43","44-45","46-47","48-49","50-51","52-53","54-55","56-57","58-59","60-61","62-63","64-65","66-67","68-69","70-71","72-73","74-75","76-77","78-79","80 years or above"),
#   next_button_text = "Next",
#   max_width_pixels = 250,
#   validate = function(answer, ...) {
#     if (answer=="Please select")
#       "Please state your age (click the small arrow on the right of the box to see the options). We ask because it matters for the analyses of the data you provide."
#     #else if (answer=="")
#     #   "Please answer the question. If you select 'Other' at the bottom of the list, please state the name of your browser in the designated field."
#     else TRUE
#   },
#   on_complete = function(answer, state, ...) {
#     set_global(key = "age", value = answer, state = state)
#   }
# )
#
# gender<-NAFC_page(
#   label = "gender",
#   prompt = p(strong ("Whats is your gender?")),
#   choices = c("Female", "Male","Other","I prefer not to tell you"),
# )
# MUSICAL EXPERIENCE
#music_exp <-
# c(
# ollen
# ollen<-NAFC_page(
#   label = "ollen",
#   prompt = p(strong ("Which title best describes you?")),
#   choices = c("Nonmusician", "Music-loving nonmusician","Amateur musician","Serious amateur musician","Semiprofessional musician","Professional musician"),
#   on_complete = function(answer, state, ...) {
#     set_global(key = "ollen", value = answer, state = state)
#     # if (answer == "Nonmusician"|answer =="Music-loving nonmusician") skip_n_pages(state,3)
#   }
#   )
# COMMENTS
# duplets <- dropdown_page(
#   label = "duplets",
#   prompt = p(strong("Did you take part in this exact same pilot experiment before?")),
#   save_answer=TRUE,
#   choices = c("Please select", "No", "Yes, once before", "Yes, twice before",	"Yes, three times before",	"Yes, four times before",	"Yes, five times before",	"Yes, six or more times before"),
#   # alternative_choice = TRUE,
#   # alternative_text = "I prefer not to tell you",
#   next_button_text = "Next",
#   max_width_pixels = 250,
#   validate = function(answer, ...) {
#     if (answer=="Please select")
#       "Please let us know if you tried this exact same experiment before. We ask because it matters for the analyses of the data you provide. If you like, you can provide additional comments in the next and final question."
#     else TRUE
#   },
#   on_complete = function(answer, state, ...) {
#     set_global(key = "duplets", value = answer, state = state)
#     if (answer != "No") skip_n_pages(state,1)
#   }
# )
code_1 <- text_input_page(
label = "code",
# one_line = TRUE,
width = "400px",
prompt = div(
HTML("<br>"),
p(strong("Personal code")),
HTML("<br>"),
p("Please enter a unique personal identifier as follows: Number of letters in your current street name + last three letters of your mom's first name + the result when you sum up the first 4 numbers of your current phone number (without the country code +45). If you live on Main street, your mom's name is Gertrude, and your phone number is 52 12 34 56, your code would be 10ude10."),
p("You will be asked to enter this identifier every time you complete this short experiment. We will also need it for when you are coming to the lab.")
),
save_answer = T,
button_text = "Next",
validate = function(answer, ...) {
if (answer=="")
"Please enter your personal identifier."
else TRUE
},
on_complete = function(answer, state, ...) {
set_global(key = "code_1", value = answer, state = state)
if (answer != "No") skip_n_pages(state,1)
}
)
# code_2 <- text_input_page(
#   label = "code",
#   # one_line = TRUE,
#   width = "400px",
#   prompt = div(
#     HTML("<br>"),
#     p(strong("Personal code")),
#     HTML("<br>"),
#     p("Please enter the self-chosen code you used last time you took part in this pilot experiment.")
#   ),
#   save_answer = T,
#   button_text = "Next",
#   validate = function(answer, ...) {
#     if (answer=="")
#       "Please enter the code you have previously used in this experiment. If you don't remember your code, make up a new one and use that for any future participation in this same experiment."
#     else TRUE
#   },
#   on_complete = function(answer, state, ...) {
#     set_global(key = "code_2", value = answer, state = state)
#     if (answer != "") skip_n_pages(state,2)
#   }
# )
thanks<-final_page(div(
HTML("<img src='img/au_logo.png'></img> <img src='img/mib_logo.png'></img>"),
div(
h3(strong("Thanks again!")),
p("Don't forget to complete this short task 5 times with 2 hours seperating each time. We will see you in the lab! "),
p("If you have any questions, feel free to contact ben.engler@clin.au.dk."),
p("............."),
HTML("<br>"),
p("Your data has been saved now and you can safely close the browser window.")
# p("If you want to, you can click the button below")
)
))
# facts<-c("E is the most common letter and appears in 11 percent of all english words.",
#                 "Pringles aren't actually potato chips.",
#                 "Water makes different pouring sounds depending on its temperature (colder water => higher pitch)"
#                 )
# ff<-sample(facts, 1)
# fun_fact<-final_page(div(
#   HTML("<img src='img/au_logo.png'></img> <img src='img/mib_logo.png'></img>"),
#   div(
#     h3(strong("Did you know that...")),
#     p("insert fun fact here"),
#     p("For more fun facts, repeat the test anytime. www.cmb-onlinetest.uni.au.dk/SMT.")
#   )
# ))
elts <- join(
intro,
poly_ratio,
elt_save_results_to_disk(complete = FALSE),
code_1,
elt_save_results_to_disk(complete = TRUE),
thanks
# fun_fact
)
shiny::runApp(".")
